# 要件定義書: なにしたっけ (Nani-shitakke)

## 1. アプリケーション概要

**アプリ名**: なにしたっけ
**目的**: 「今日、自分は何をしていたか」をクイックに記録・確認できるライフログアプリ。
**コンセプト**: 機能はシンプルに、デザインは親しみやすく「かわいらしい」雰囲気を重視。

## 2. 技術スタック

- **Frontend**: React (Vite) ※構築済み
- **Package Manager**: Bun (必須)
- **Backend / Auth / Database**: Supabase
- **UI Library**: Chakra UI
- **Styling**: SCSS + CSS Modules (Chakra UI で対応しきれない細部の装飾やアニメーションに使用)
- **Font**: M PLUS Rounded 1c (Google Fonts)

## 3. データモデル (Supabase Database)

### `profiles` テーブル

- `id`: uuid (Primary Key, References auth.users)
- `email`: text
- `avatar_url`: text

### `activities` テーブル

- `id`: uuid (Primary Key, Default: gen_random_uuid())
- `user_id`: uuid (Foreign Key -> profiles.id)
- `date`: date (記録対象の日付)
- `start_time`: time (開始時刻)
- `end_time`: time (終了時刻)
- `content`: text (活動内容)
- `created_at`: timestamptz (Default: now())

## 4. 機能要件

### 4.1. 認証機能

- Supabase Auth を利用した Google ログイン。
- ログイン状態に応じたルーティング制御。

### 4.2. 記録・表示機能

- **活動登録**: Chakra UI のモーダルやフォームコンポーネントを使用して入力。
- **一覧表示**: 選択した日のログを時系列（開始時刻順）でリスト表示。
- **フィルタ**: カレンダー等で日付を選択し、その日のログを表示。
- **削除**: 各ログの削除機能。

## 5. UI/UX デザイン要件 (Chakra UI + Custom SCSS)

- **デザインテーマ**:
  - **Chakra UI の Theme 拡張**: `borderRadius` を `2xl` (16px~20px) に設定。
  - **カラー**: パステル系 (`pink.100`, `blue.50`, `orange.100`) を基調にする。
- **「かわいい」のこだわり (SCSS Modules)**:
  - Chakra UI の `Box` 等に CSS Modules で独自のクラスを当て、手書き風の境界線や、ぷっくりとしたホバーアニメーションを付与する。
- **フォント**: 全体的に丸ゴシックを適用。

## 6. 実装指示 (Gemini CLI 用)

### Step 1: 依存関係の追加

- `bun add @supabase/supabase-js @chakra-ui/react @emotion/react @emotion/styled codesandbox-import-utils framer-motion sass`

### Step 2: Supabase / Backend

- `profiles`, `activities` テーブル作成用の SQL。
- RLS (Row Level Security) の設定 SQL（自分のデータのみ閲覧・操作可能にする）。
- `src/lib/supabase.ts` での初期化。

### Step 3: Chakra UI / CSS Modules 設定

- `src/styles/theme.ts` で Chakra UI の丸みやフォントをカスタマイズ。
- `src/components/` 内に SCSS ファイルを作成し、CSS Modules を適用。

### Step 4: 各画面実装

1. **LoginPage**: Google ログインボタンを配置したかわいいログイン画面。
2. **MainPage**: 活動リストと入力フォームを含むホーム画面。
